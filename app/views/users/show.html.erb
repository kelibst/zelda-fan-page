<div class="container-fluid bg-light d-sm-flex">

<div class="col-sm-8">

  <div class="container-fluid my-4">
    <h1 class="text-secondary">New Post</h1>

    <%= render 'opinions/form', obj: @opinion %>

    
  </div>

    <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#post">Post</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#comments">Comments</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#followers">Followers</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div class="tab-pane container active" id="post">
        <% if @opinions.length > 0 %>
            <p class="my-4"> All Post by: <h4 class="text-secondary text-uppercase font-weight-bolder"><%= @user.first_names%></h4></p>

            <% else %>
            <h4 class="text-secondary my-4 font-weight-bolder text-center"><%= @user.first_names%> has no posts yet!</h4>
       <% end %>
      <% @opinions.each do |opinion| %>
        <div class="card my-4">
          
          <div class="py-4 card-body mx-4">
            <h6 class="text-uppercase text-secondary text-underline">Post Content</h6>
            <p class="card-title">Author: <%= link_to opinion.user.first_names, user_path(opinion.user), class: "btn text-uppercase"  %></p>
            <p class="opinion-content border-danger border rounded p-4">
               <%= opinion.content %>
            </p>
             
              <div class="card-info my-3">
              <span> Posted at: </span> <span> <%= opinion.created_at %></span>
            </div>
        </div>
          <div>
            
          </div>
          <%= render 'opinions/comment', obj: opinion%>
          
        </div>
      <% end %>
    </div>
    <div class="tab-pane container fade" id="comments">...</div>
    <div class="tab-pane container fade" id="followers">...</div>
  </div>
  </div>

  <div class="col-sm-4 py-4">
    <div class="container-fluid">
    <div class="card bg-dark">

    <div class="my-4 mx-auto">  
        <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjF9" alt="Logo" style="width:80px;" class="card-img-top rounded-circle">
    </div>

    <h4 class="text-light font-weight-bolder my-4 card-title text-center text-uppercase"><%= "#{@user.first_names} #{@user.last_name}"%></h4>
    <div class="card-body d-flex text-center justify-content-center">
        <div class="tile p-3 border mx-2 rounded">
            <p class="text-secondary"><%= @user.friendships.following(@user).count %></p>
            <p class="text-white">Following</p>
        </div>
        <div class="tile p-3 border mx-2 rounded">
            <p class="text-secondary"><%= @user.opinions.all.count %></p>
            <p class="text-white">Posts</p>
        </div>
        <div class="tile p-3 border mx-2 rounded">
            <p class="text-secondary"><%= Friendship.all.followers(@user).count %></p>
            <p class="text-white"> Followers</p>
        </div>
    </div>
  </div>
    <h4 class="text-center text-secondary my-4 ">List of all Users</h4>
      <% @users.each do |user| %>
       <div class="card">
         <p class="card-title text-center pt-4"><%= link_to user.first_names, user_path(user), class: "text-dark  text-capitalize" %></p>
        <div class="card-body text-center">
          <%if (@current_user.id != user.id)%>
            <% if Friendship.where(user_id: current_user.id, follower_id: user.id).exists?  %>
              <%= link_to "Unfollow", unfollow_path(:id => user.id), method: :delete, data: {confirm: "You are about to Unfollow #{user.last_name}"}, class: "card-link btn btn-danger"%>
            <%elsif !Friendship.where(user_id: current_user.id, follower_id: user.id).exists? %>
              <%= link_to "Follow", follow_path(:id => user.id), class: "card-link btn btn-primary"%>

            <% end %>
          <% end %>
       </div>
      <% end %>
  </div>
</div>
</div>